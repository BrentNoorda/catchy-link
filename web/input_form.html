<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="https://googledrive.com/host/0B4rxOB63nnDMdE10cnlDWGxDSUU"/>
    <title>catchy.link</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <!--google-analytics-->
    <link rel="stylesheet" media="screen" type="text/css" href="catchylink.css">
    <style media="screen" type="text/css">
      .advanced-option {
        display: table-row;
      }
    </style>
    <script><!--
      function test_embed_mode() {
        var url = $("#longurl").val();
        var title = $("#catchyurl").val();
        window.open("{{catchylink_root_url}}/~/embtst?url=" + url + "&cl=" + title,"catchy-test");
      }

      function mode_change(onload) {
        var mode = $("select[name=mode]").val();
        if ( mode == "embed" ) {
          $("#test-embed").show(onload ? 0 : 300);
        } else {
          $("#test-embed").hide(onload ? 0 : 300);
        }
      }

      function show_advanced_menu() {
        $(".advanced-option").show(400);
        $("#show-advanced").hide();
        $("#advanced-menu").val("1");
      }

      $(function() {
        var advanced_menu = $("#advanced-menu").val() === "1";
        if ( !advanced_menu ) {
          $("#show-advanced").show();
          $(".advanced-option").hide();
        }
        $("#longurl").focus();
        $('#test-embed a').click(function(evt) {
          evt.preventDefault();
          test_embed_mode();
        });
        $('#show-advanced a').click(function(evt) {
          evt.preventDefault();
          show_advanced_menu();
        });
        $("select[name=mode]").change(function(){mode_change(false);});
        mode_change(true);
      });
    --></script>
  </head>
  <body>
    <form action="/" method="post">
      <table class="middle-block">
        <tr>
          <td style="padding-left:0;">
            <h2>catchy.link</h2>
          </td>
          <td colspan="2">
            <h3>Turn a long internet url into something that is easy to remember
                <span style="opacity:0.5;">(and temporary, and renewable, and owned and modifiable only by you)</span><!--etc--></h3>
            <span class="errormsg" style="{{globalerror-style}};font-size:150%;">{{globalerror-errormsg}}</span>
          </td>
        </tr>
        <tr>
          <td class="align-right">
            <label for="longurl">Long URL</label>
          </td>
          <td colspan="2" class="input-cell">
            <input type="text" id="longurl" name="longurl" />
            <span class="errormsg" style="{{longurl-style}}"><br/>{{longurl-errormsg}}</span>
          </td>
        </tr>
        <tr>
          <td class="align-right left-of-2">
            <label for="catchyurl">Catchy URL</label>
          </td>
          <td class="middle-of-2">
            <span style="opacity:0.5;">{{catchylink_root_url}}/</span>
          </td>
          <td style="padding-left:0;" class="input-cell right-of-3">
            <input type="text" id="catchyurl" name="catchyurl" />
          </td>
        </tr>
        <tr class="errormsg" style="{{catchyurl-table-style}}">
          <td>
            &nbsp;
          </td>
          <td colspan="2">
            <span>{{catchyurl-errormsg}}</span>
          </td>
        </tr>
        <tr>
          <td class="align-right">
            <label>Duration</label>
          </td>
          <td colspan="2">
            <select name="duration">
              <option value="1">1 day</option>
              <option value="7" selected="selected">1 week</option>
              <option value="31">1 month</option>
              <option value="365">1 year</option>
            </select>
            <span style="opacity:0.5;">you will be emailed a renew option for any duration longer than 1 day</span>
          </td>
        </tr>
        <tr id="show-advanced" style="display:none;">
          <td>&nbsp;</td>
          <td colspan="2">
            <a href="#">show advanced options</a>
          </td>
        </tr>
        <tr class="advanced-option">
          <td class="align-right">
            <label>Mode</label>
          </td>
          <td colspan="2">
            <select name="mode">
              <option value="automatic" selected="selected">automatic</option>
              <option value="prompt">prompt</option>
              <option value="promptemail">prompt&amp;email</option>
              <option value="embed">embed</option>
            </select>
            <span style="opacity:0.5;">see explanations for these modes <a href="https://docs.google.com/document/d/19pBSli5Sdt9bdmLkD59PkwPeZ3BHYl1VNNjrlGpBcYI/view#heading=h.jlgzavlmk170" target="catchy-test">here</a> - default:automatic</span>
            <div style="margin-top:0.5em;display:none;" id="test-embed"><i>Not all pages embed well. You may test this page here:</i>
              <a href="#">Test Embed Mode</a>
            </div>
          </td>
        </tr>
        <tr class="advanced-option">
          <td class="align-right">
            <label>Searchable:</label>
          </td>
          <td colspan="2">
            by catchy name <select name="search-name">
              <option value="srchname-on" selected="selected">true</option>
              <option value="srchname-off">false</option>
            </select>
            <span style="opacity:0.5;">allow people to find an existing catchy.link by partial name (if I ever get around to implementing this feature) default:true</span>
          </td>
        </tr>
        <tr class="advanced-option">
          <td class="align-right">
            <label>&nbsp;</label>
          </td>
          <td colspan="2">
            by your email <select name="search-email">
              <option value="srchemail-on">true</option>
              <option value="srchemail-off" selected="selected">false</option>
            </select>
            <span style="opacity:0.5;">allow people to list the links created by this email address (if I ever get around to implementing this feature) default:false</span>
          </td>
        </tr>
        <tr>
          <td class="align-right">
            <label for="youremail">Your Email</label>
          </td>
          <td colspan="2" class="input-cell">
            <input type="text" id="youremail" name="youremail" />
            <span class="errormsg" style="{{youremail-style}}"><br/>{{youremail-errormsg}}</span>
          </td>
        </tr>
        <tr>
          <td>
            &nbsp;
          </td>
          <td colspan="2">
            <input type="hidden" id="advanced-menu" name="advanced-menu" value="0" />
            <button type="submit" class="button-link">create catchy.link</button>
          </td>
        </tr>
      </table>
    </form>
    <div class="middle-block" style="opacity:0.8;">
      <br/><hr/>
      For full details about catchy.link see this document:
      <div class="display-long-url">
        <a href="https://docs.google.com/document/d/19pBSli5Sdt9bdmLkD59PkwPeZ3BHYl1VNNjrlGpBcYI/edit?usp=sharing">
          https://docs.google.com/document/d/19pBSli5Sdt9bdmLkD59PkwPeZ3BHYl1VNNjrlGpBcYI/edit?usp=sharing
        </a>
        <a href="https://docs.google.com/document/d/1hUBJVTUaZYypqci_WXACVy7TVBTgiDhvziofMiYEAWI/pub" style="opacity:0.2;font-size:50%;">v2</a>
        <a href="https://docs.google.com/document/d/1v4ZO4tRJNvD63PN-So9cTL8bSvj0On2BiqgopaSNQJg/pub" style="opacity:0.2;font-size:50%;">v3</a>
      </div>
      or, if you want a more memorable (&#8220;catchier&#8221;) address:
      <div class="display-long-url">
        <a href="http://catchy.link/CatchyLinkManual">catchy.link/CatchyLinkManual</a>
      </div>
    </div>
  </body>
</html>
